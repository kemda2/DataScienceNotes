# Kurs 1: Veri Biliminin Temelleri

## PACE Aşamaları

Şimdiye kadar, PACE çerçevesi ile tanıştınız ve veri analizi projeleri için nasıl net bir temel ve yapı sağladığını öğrendiniz. Ayrıca PACE'nin bir kısaltma olduğunu öğrendiniz; harflerin her biri bir projede eyleme geçirilebilir bir aşamayı temsil eder: planlayın, analiz edin, inşa edin ve uygulayın. Bu okumada, PACE iş akışı hakkında daha fazla bilgi edinecek ve sürecin her aşamasının veri analizine nasıl yardımcı olabileceğini keşfedeceksiniz.

### Neden bir iş akışı yapısı kullanıyoruz?

Genel bir kural olarak, veri profesyonelleri, veri projelerinin süresi boyunca onlara rehberlik etmek için iş akışı yapılarına güvenir. Büyük ölçekli bir proje içinde, belirli bir işlem sırası gerektiren bir dizi görev olabilir. Karmaşıklıkları belirlemek ve birlikte çalışmanın tutarlı yollarını bulmak, projeleri daha verimli hale getirebilir ve daha üretken iletişim sağlayabilir. Bu ve diğer potansiyel engelleyici türlerini erken belirlemek, bir projeyi olumsuz yönde etkilemeden önce kaynakları önceden planlamanıza ve hazırlamanıza yardımcı olabilir.

Bu programın oluşturulmasına yardımcı olan veri uzmanlarından oluşan ekibimiz, PACE'i esnek bir model olarak geliştirdi; tüm iş akışını kesintiye uğratmadan her aşamayı yeniden ziyaret etmeniz teşvik edilir. PACE aracılığıyla, ne zaman dikkate alınması gerekeceği için eylem alanlarını ve bağlamları belirleyeceksiniz. Sonuç olarak, PACE, profesyonellere bir veri projesinin her aşamasında çalışırken çabalarını destekleyebilecek özelleştirilebilir bir iskele sunar.

### PACE modeline daha yakından bir bakış

PACE modelinin her aşamasına daha yakından bakalım.

![image](./images/1001.png)

#### **Plan**

Bir projenin başında başarı için sağlam bir temel oluşturmak önemlidir. Burada projenizin kapsamını tanımlayacaksınız. Bu, kuruluşun bilgilendirme ihtiyaçlarını belirleyerek başlayacağınız zamandır. Planlama aşamasında bir projenin en geniş bakış açısına sahip olacaksınız. İlgili tüm faktörleri ve süreçleri değerlendirerek, bir eylem planını kavramsallaştırmak için yaratıcılığınızı kullanarak tamamlamaya giden bir yolu haritalandırıyorsunuz. Burada, iş akışınızda yenilikçi bir yaklaşım gerektirebilecek görevleri de özel olarak not alacaksınız.

**Özet**: Planlama aşaması, projenin kapsamını kavramsallaştırdığınız ve bir projeyi tamamlama sürecinde size rehberlik edecek adımları geliştirdiğiniz yerdir.

İşte planlama aşaması görevlerinin türlerine birkaç örnek:

- Araştırma iş verileri

- Proje kapsamını tanımla

- Bir iş akışı geliştirin

- Proje ve/veya paydaş ihtiyaçlarını değerlendirin

#### **Analiz**

Analiz aşamasında ilk kez verilerle etkileşime gireceksiniz. Burada proje için ihtiyaç duyacağınız tüm verileri edineceksiniz. Bazı veri kümeleri kuruluşunuzdaki birincil kaynaklardan gelebilir. Diğerlerinin şirketiniz dışındaki ikincil kaynaklardan toplanması gerekebilir. Hükümet veya açık kaynaklı verilere ihtiyacınız olduğunu bile görebilirsiniz. Analiz aşaması aynı zamanda keşifsel veri analizi veya EDA ile ilgileneceğiniz yerdir. Bu, proje için gerekli tüm verilerin temizlenmesini, yeniden düzenlenmesini ve analiz edilmesini içerir.

**Özet**: Analiz aşaması, projeniz için tüm verileri toplayacağınız, hazırlayacağınız ve analiz edeceğiniz yerdir.

İşte aşama görevlerini analiz etme türlerine birkaç örnek:

- Veritabanını biçimlendir

- Verileri fırçala

- Verileri kullanılabilir formatlara dönüştürün

#### **İnşa**

Adından da anlaşılacağı gibi, inşaat aşaması tamamen bina ile ilgilidir. AKPM'nin bu aşamasında modeller inşa edecek, yorumlayacak ve revize edeceksiniz. Bazı projeler, verilerinizdeki korelasyonları ortaya çıkarmak için makine öğrenimi algoritmaları gerektirecektir. Aksi takdirde kullanılmayacak olan verilerden bilgileri ortaya çıkarmak için bu korelasyonları kullanacaksınız. Bu ilişkiler, kuruluşunuzun gelecek hakkında bilinçli kararlar almasına yardımcı olabilir.

**Özet**: İnşaat aşamasında, veriler içinde kilitlenmiş gizli ilişkilere erişmenizi sağlayacak modeller oluşturacaksınız.

İşte inşaat aşaması görev türlerine birkaç örnek:

- Modelleme yaklaşımını seçin

- Modeller oluştur

- Makine öğrenimi algoritmaları oluşturun

#### **Yürütme**

Yürütme aşamasında, analizinizi ve inşanızı eyleme geçireceksiniz. Burada bulgularınızı iç (kuruluşunuzun içinde) ve dış (kuruluşunuzun dışında) paydaşlara ileteceksiniz. Oldukça sık, bu, birlikte çalıştığınız şirketlerin iş tarafındaki paydaşları içerecektir. Bulgularınızı sunmak, yürütme aşamasının sadece bir parçasıdır. Paydaşlar geri bildirim sağlayacak, sorular soracak ve toplayıp dahil edeceğiniz önerilerde bulunacaktır.

**Özet**: Yürütme aşamasında analizinizin bulgusunu sunacak, geri bildirim alacak ve gerektiğinde revizyonlar yapacaksınız.

İşte yürütme aşaması görevlerine birkaç örnek:

- Sonuçları paylaş

- Bulguları diğer paydaşlara sunun

- Geri bildirimi ele al

### İletişim ve PACE

PACE iş akışının neresinde olursanız olun, çerçeveyi projenin gerçekleştirilmesine taşımak için iletişim esastır. Bunu düşünmenin bir yolu, PACE'nin dört aşamasını tamamlanmış bir devre olarak görselleştirmek ve iletişimin elektrik akışıyla temsil edilmesidir.

Her aşamada, iş akışını iyileştirmek için her zaman iletişime ihtiyaç duyulacaktır. Bu, verileriniz hakkında sorular sormak, ek kaynaklar toplamak, paydaşları ilerleme hakkında güncellemek veya bulguları sunmak ve geri bildirim almak olabilir.

### PACE'nin uyarlanabilirliği

Bir projenin başlangıcında, PACE modeli size rehberlik edecek iyi bir yapı sunar. Başlangıçta, ihtiyaç duyacağınız bilgi ve araçları topladığınız ve size rehberlik edecek bir çerçeve oluşturduğunuz planlama aşamasına sahipsiniz. Verileri analiz ederken ve modeller oluştururken, analiz ve yapım aşamaları size yardımcı olur. Bu adımlardan sonra yürütme aşaması, sonuçları paylaştığınız ve geri bildirim topladığınız aşamadır.

PACE modeli ilk olarak belirli bir sırayla aşamalar olarak sunulsa da, açık iletişim akışının ihtiyacınız olan aşamalara kolayca geçmenizi sağladığını keşfedeceksiniz. Yeni bilgi ve geri bildirimler sürecin herhangi bir bölümüne dahil edilebilir. Verilerin bazı yönlerini netleştirmek için analiz aşamasına geri dönmeniz ve ardından yeni modeller oluşturmaya gerek kalmadan bu yönü paydaşlarınıza sunmak için yürütme aşamasına geçmeniz gerekebilir. PACE çerçevesi herhangi bir projeye uyacak şekilde uyarlanabilir. Uyarlanabilirliği sizi yüksek derecede profesyonel esneklik ve iletişim gerektiren dinamik bir mesleğe hazırlayacaktır.

### Sonuç

Veri profesyonelleri, veri projelerindeki çok sayıda görevi yönetmelerine yardımcı olmak için yapılandırılmış iş akışlarına ihtiyaç duyar. PACE profesyonel iş akışı, profesyonel yapılarınızı ve uygulamalarınızı geliştirmenize yardımcı olmak için bu program için özel olarak tasarlanmıştır. PACE, her aşama arasında akan iletişim ile tamamlanmış bir devre gibi işlev görür. PACE'nin tasarımı, gerektiğinde aşamalar arasında serbest dolaşıma izin vererek esnekliği teşvik eder.

# Kurs 2: Python'u kullanmaya başlayın

```python
import pandas as pd

dataframe = pd.read_csv("https://storage.googleapis.com/kagglesdsdata/competitions/3136/26502/train.csv?GoogleAccessId=web-data@kaggle-161607.iam.gserviceaccount.com&Expires=1721564819&Signature=fPHv7fKX3DCqcfShmJ8XlQV0CAQHdID0JZRyHwzUaPPKqVVPDQ3aCDLx%2BF4KpaQP2SzD83KlPWZIxUSfte80K5adU%2FYDf9yjRMTQOBOvReTfO3aAnGgULCPGG1JFHAUoTTVe8XEFeQfnwf80%2BeNBNvmkXdiKDx5AWztbt04npcVfnpXZJhNBOdUIe%2Fz90jChG1%2Fo43JAWsGBg4YwzPqNb03d2RC5LcPvm1ANtGieIOo82DExb4meMCRycfh6nayDyG0Jj6Kj6gp9M3ny50u0sRFohu5A2vyXArKr0mtPIODVdAxVUlRnUIl2RLmQ7%2Fq9ZxiMEbVlcL0fREHgMF%2BbPA%3D%3D&response-content-disposition=attachment%3B+filename%3Dtrain.csv")

dataframe.head(5)
```

| PassengerId | Survived | Pclass | Name | Sex | Age | SibSp | Parch | Ticket | Fare | Cabin | Embarked |
|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|:---:|
| 1 | 0 | 3 | Braund, Mr. Owen Harris | male | 22.0 | 1 | 0 | A/5 21171 | 7.2500 | NaN | S |
| 2 | 1 | 1 | Cumings, Mrs. John Bradley (Florence Briggs) | female | 38.0 | 1 | 0 | PC 17599 | 71.2833 | C85 | C |
| 3 | 1 | 3 | Heikkinen, Miss. Laina | female | 26.0 | 0 | 0 | STON/O2. 3101282 | 7.9250 | NaN | S |
| 4 | 1 | 1 | Futrelle, Mrs. Jacques Heath (Lily May Peel) | female | 35.0 | 1 | 0 | 113803 | 53.1000 | C123 | S |
| 5 | 0 | 3 | Allen, Mr. William Henry | male | 35.0 | 0 | 0 | 373450 | 8.0500 | NaN | S |

```python
dataframe[(dataframe['Age'] > 60) & (dataframe['Pclass'] == 3)]
```

| PassengerId | Survived | Pclass | Name                        | Sex    | Age  | SibSp | Parch | Ticket  | Fare   | Cabin | Embarked |
|-------------|----------|--------|-----------------------------|--------|------|--------|--------|---------|--------|--------|----------|
| 117         | 0        | 3      | Connors, Mr. Patrick        | male   | 70.5 | 0      | 0      | 370369  | 7.7500 | NaN    | Q        |
| 281         | 0        | 3      | Duane, Mr. Frank            | male   | 65.0 | 0      | 0      | 336439  | 7.7500 | NaN    | Q        |
| 327         | 0        | 3      | Nysveen, Mr. Johan Hansen   | male   | 61.0 | 0      | 0      | 345364  | 6.2375 | NaN    | S        |
| 484         | 1        | 3      | Turkula, Mrs. (Hedwig)      | female | 63.0 | 0      | 0      | 4134    | 9.5875 | NaN    | S        |
| 852         | 0        | 3      | Svensson, Mr. Johan         | male   | 74.0 | 0      | 0      | 347060  | 7.7750 | NaN    | S        |

```python
dataframe["2023 Fare"] = dataframe["Fare"] * 2
dataframe.head(5)
```

| PassengerId | Survived | Pclass | Name                                          | Sex    | Age  | SibSp | Parch | Ticket             | Fare    | Cabin | Embarked | 2023 Fare |
|-------------|----------|--------|-----------------------------------------------|--------|------|--------|--------|---------------------|---------|--------|----------|------------|
| 1           | 0        | 3      | Braund, Mr. Owen Harris                       | male   | 22.0 | 1      | 0      | A/5 21171           | 7.2500  | NaN    | S        | 14.5000    |
| 2           | 1        | 1      | Cumings, Mrs. John Bradley (Florence Briggs)  | female | 38.0 | 1      | 0      | PC 17599            | 71.2833 | C85    | C        | 142.5666   |
| 3           | 1        | 3      | Heikkinen, Miss. Laina                        | female | 26.0 | 0      | 0      | STON/O2. 3101282    | 7.9250  | NaN    | S        | 15.8500    |
| 4           | 1        | 1      | Futrelle, Mrs. Jacques Heath (Lily May Peel)  | female | 35.0 | 1      | 0      | 113803              | 53.1000 | C123   | S        | 106.2000   |
| 5           | 0        | 3      | Allen, Mr. William Henry                      | male   | 35.0 | 0      | 0      | 373450              | 8.0500  | NaN    | S        | 16.1000    |

```python
dataframe.iloc[1][3]
# 'Cumings, Mrs. John Bradley (Florence Briggs Thayer)'
```

```python
fare = dataframe.groupby(['Sex', 'Pclass']).agg({'Fare': ['count', 'sum']}) 
fare['fare avg'] = fare['Fare']['sum']/fare['Fare']['count'] 
fare
```

| Sex    | Pclass | Fare Count | Fare Sum   | Fare Avg   |
|--------|--------|------------|------------|------------|
| female | 1      | 94         | 9975.8250  | 106.125798 |
|        | 2      | 76         | 1669.7292  | 21.970121  |
|        | 3      | 144        | 2321.1086  | 16.118810  |
| male   | 1      | 122        | 8201.5875  | 67.226127  |
|        | 2      | 108        | 2132.1125  | 19.741782  |
|        | 3      | 347        | 4393.5865  | 12.661633  |

```python
import pandas as pd

data = {'col1': [1, 2], 'col2': [3, 4]}
df = pd.DataFrame(data=data)
df
```
|    | col1 | col2 |
|----|------|------|
| 0  | 1    | 3    |
| 1  | 2    | 4    |

```python
import numpy as np

df2 = pd.DataFrame(np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]), columns=['a', 'b', 'c'], index=['x', 'y', 'z'])

df2
```

|   | a | b | c |
|---|---|---|---|
| x | 1 | 2 | 3 |
| y | 4 | 5 | 6 |
| z | 7 | 8 | 9 |

```python
# Print class of first row 
print(type(dataframe.iloc[0]))

# Print class of "Same" column 
print(type(dataframe['Name']))

# <class 'pandas.core.series.Series'>
# <class 'pandas.core.series.Series'>
```

```python
dataframe[['Name','Age']]
```

| Index | Name                                              | Age  |
|-------|---------------------------------------------------|------|
| 0     | Braund, Mr. Owen Harris                           | 22.0 |
| 1     | Cumings, Mrs. John Bradley (Florence Briggs Th...)| 38.0 |
| 2     | Heikkinen, Miss. Laina                            | 26.0 |
| 3     | Futrelle, Mrs. Jacques Heath (Lily May Peel)      | 35.0 |
| 4     | Allen, Mr. William Henry                          | 35.0 |
| ...   | ...                                               | ...  |
| 886   | Montvila, Rev. Juozas                             | 27.0 |
| 887   | Graham, Miss. Margaret Edith                      | 19.0 |
| 888   | Johnston, Miss. Catherine Helen "Carrie"          | NaN  |
| 889   | Behr, Mr. Karl Howell                             | 26.0 |
| 890   | Dooley, Mr. Patrick                               | 32.0 |

```python
dataframe.iloc[0]
```

PassengerId                          1
Survived                             0
Pclass                               3
Name           Braund, Mr. Owen Harris
Sex                               male
Age                               22.0
SibSp                                1
Parch                                0
Ticket                       A/5 21171
Fare                              7.25
Cabin                              NaN
Embarked                             S
2023 Fare                         14.5
Name: 0, dtype: object

```python
dataframe.iloc[[0]]
```

| PassengerId | Survived | Pclass | Name                   | Sex  | Age  | SibSp | Parch | Ticket    | Fare | Cabin | Embarked | 2023 Fare |
|-------------|----------|--------|------------------------|------|------|--------|--------|-----------|------|-------|----------|------------|
| 1           | 0        | 3      | Braund, Mr. Owen Harris| male | 22.0 | 1      | 0      | A/5 21171 | 7.25 | NaN   | S        | 14.5       |

```python
dataframe.iloc[0:3]
```

| PassengerId | Survived | Pclass | Name                                              | Sex    | Age  | SibSp | Parch | Ticket           | Fare    | Cabin | Embarked | 2023 Fare |
|-------------|----------|--------|---------------------------------------------------|--------|------|--------|--------|-------------------|---------|--------|----------|------------|
| 1           | 0        | 3      | Braund, Mr. Owen Harris                           | male   | 22.0 | 1      | 0      | A/5 21171         | 7.2500  | NaN    | S        | 14.5000    |
| 2           | 1        | 1      | Cumings, Mrs. John Bradley (Florence Briggs Th...)| female | 38.0 | 1      | 0      | PC 17599          | 71.2833 | C85    | C        | 142.5666   |
| 3           | 1        | 3      | Heikkinen, Miss. Laina                            | female | 26.0 | 0      | 0      | STON/O2. 3101282  | 7.9250  | NaN    | S        | 15.8500    |

```python
dataframe.iloc[0:3,[3,4]]
```

| Index | Name                                               | Sex    |
|-------|----------------------------------------------------|--------|
| 0     | Braund, Mr. Owen Harris                            | male   |
| 1     | Cumings, Mrs. John Bradley (Florence Briggs Th...)| female |
| 2     | Heikkinen, Miss. Laina                             | female |

```python
dataframe.iloc[:,[3]]
```

| Index | Name                                              |
|-------|---------------------------------------------------|
| 0     | Braund, Mr. Owen Harris                           |
| 1     | Cumings, Mrs. John Bradley (Florence Briggs Th...)|
| 2     | Heikkinen, Miss. Laina                            |
| 3     | Futrelle, Mrs. Jacques Heath (Lily May Peel)      |
| 4     | Allen, Mr. William Henry                          |
| ...   | ...                                               |
| 886   | Montvila, Rev. Juozas                             |
| 887   | Graham, Miss. Margaret Edith                      |
| 888   | Johnston, Miss. Catherine Helen "Carrie"          |
| 889   | Behr, Mr. Karl Howell                             |
| 890   | Dooley, Mr. Patrick                               |

```python
dataframe.iloc[0,3]
```

'Braund, Mr. Owen Harris'

```python
dataframe.loc[0:3,['Name']]
```

| Index | Name                                              |
|-------|---------------------------------------------------|
| 0     | Braund, Mr. Owen Harris                           |
| 1     | Cumings, Mrs. John Bradley (Florence Briggs Th...)|
| 2     | Heikkinen, Miss. Laina                            |
| 3     | Futrelle, Mrs. Jacques Heath (Lily May Peel)      |


| **Attribute**                                                                                                  | **Description**                                                     |
| -------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------- |
| [columns](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.columns.html#pandas.DataFrame.columns) | Returns the column labels of the dataframe                          |
| [dtypes](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.dtypes.html#pandas.DataFrame.dtypes)    | Returns the data types in the dataframe                             |
| [iloc](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.iloc.html#pandas.DataFrame.iloc)          | Accesses a group of rows and columns using integer-based indexing   |
| [loc](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.loc.html#pandas.DataFrame.loc)             | Accesses a group of rows and columns by label(s) or a Boolean array |
| [shape](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.shape.html#pandas.DataFrame.shape)       | Returns a tuple representing the dimensionality of the dataframe    |
| [values](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values)    | Returns a NumPy representation of the dataframe                     |



| **Method**                                                                                                                      | **Description**                                                                                                                                                        |
| ------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [apply(_)_](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply)                    | Applies a function over an axis of the dataframe                                                                                                                       |
| [copy()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.copy.html#pandas.DataFrame.copy)                         | Makes a copy of the dataframe’s indices and data                                                                                                                       |
| [describe()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.describe.html#pandas.DataFrame.describe)             | Returns descriptive statistics of the dataframe, including the minimum, maximum, mean, and percentile values of its numeric columns; the row count; and the data types |
| [drop()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.drop.html#pandas.DataFrame.drop)                         | Drops specified labels from rows or columns                                                                                                                            |
| [groupby()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby)                | Splits the dataframe, applies a function, and combines the results                                                                                                     |
| [head(_n=5_)](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.head.html#pandas.DataFrame.head)                    | Returns the first _n_ rows of the dataframe (default=5)                                                                                                                |
| [info()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.info.html#pandas.DataFrame.info)                         | Returns a concise summary of the dataframe                                                                                                                             |
| [isna()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.isna.html#pandas.DataFrame.isna)                         | Returns a same-sized Boolean dataframe indicating whether each value is null (can also use isnull() as an alias)                                                       |
| [sort_values()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values)    | Sorts by the values across a given axis                                                                                                                                |
| [value_counts()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.value_counts.html#pandas.DataFrame.value_counts) | Returns a series containing counts of unique rows in the dataframe                                                                                                     |
| [where()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.where.html#pandas.DataFrame.where)                      | Replaces values in the dataframe where a given condition is false                                                                                                      |

```python
data = {'planet': ['Mercury', 'Venus', 'Earth', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune'],
        'radius_km': [2440, 6052, 6371, 3390, 69911, 58232, 25362, 246221],
        'moons': [0, 0, 1, 2, 80, 83, 27, 14]}

planets = pd.DataFrame(data)

planets
```

| Index | Planet  | Radius_km | Moons |
|-------|---------|-----------|-------|
| 0     | Mercury | 2440      | 0     |
| 1     | Venus   | 6052      | 0     |
| 2     | Earth   | 6371      | 1     |
| 3     | Mars    | 3390      | 2     |
| 4     | Jupiter | 69911     | 80    |
| 5     | Saturn  | 58232     | 83    |
| 6     | Uranus  | 25362     | 27    |
| 7     | Neptune | 246221    | 14    |

```python
mask = planets['moons'] < 20
mask
```

|Index|Moons|
|---|-------|
|0|     True|
|1|     True|
|2|     True|
|3|     True|
|4|    False|
|5|    False|
|6|    False|
|7|     True|

```python
planets[mask]
```

| Index | Planet  | Radius_km | Moons |
|-------|---------|-----------|-------|
| 0     | Mercury | 2440      | 0     |
| 1     | Venus   | 6052      | 0     |
| 2     | Earth   | 6371      | 1     |
| 3     | Mars    | 3390      | 2     |
| 7     | Neptune | 246221    | 14    |

```python
planets[planets['moons']<20]
```

| Index | Planet  | Radius_km | Moons |
|-------|---------|-----------|-------|
| 0     | Mercury | 2440      | 0     |
| 1     | Venus   | 6052      | 0     |
| 2     | Earth   | 6371      | 1     |
| 3     | Mars    | 3390      | 2     |
| 7     | Neptune | 246221    | 14    |

```python
mask = (planets['moons'] < 10) | (planets['moons'] > 50)

mask
```

| Index | moons |
|-------|-------|
| 0     | True  |
| 1     | True  |
| 2     | True  |
| 3     | True  |
| 4     | True  |
| 5     | True  |
| 6     | False |
| 7     | False |

```python
planets[mask]
```

| Index | Planet  | Radius_km | Moons |
|-------|---------|-----------|-------|
| 0     | Mercury | 2440      | 0     |
| 1     | Venus   | 6052      | 0     |
| 2     | Earth   | 6371      | 1     |
| 3     | Mars    | 3390      | 2     |
| 4     | Jupiter | 69911     | 80    |
| 5     | Saturn  | 58232     | 83    |

```python
mask = (planets['moons'] > 20) & ~ (planets['moons'] == 80) & ~ (planets['radius_km'] < 50000)
planets[mask]
```

| Index | Planet | Radius_km | Moons |
|-------|--------|-----------|-------|
| 5     | Saturn | 58232     | 83    |

```python
data = {'planet': ['Mercury', 'Venus', 'Earth', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune'],
        'radius_km': [2440, 6652, 6371, 3390, 69911, 58232, 25362, 24622], 
        'moons': [0, 0, 1, 2, 80, 83, 27, 14],
        'type': ['terrestrial', 'terrestrial', 'terrestrial', 'terrestrial', 'gas giant', 'gas giant', 'ice giant', 'ice giant'], 
        'rings': ['no', 'по', 'no', 'no', 'yes', 'yes', 'yes', 'yes'], 
        'mean_temp_c': [167, 464, 15, 65, 110, 140, 195, -200], 
        'magnetic_field': ['yes', 'no', 'yes', 'no', 'yes', 'yes', 'yes', 'yes']}

planets = pd.DataFrame(data)

planets
```

| Index | Planet  | Radius_km | Moons | Type       | Rings | Mean_Temp_C | Magnetic_Field |
|-------|---------|-----------|-------|------------|-------|-------------|----------------|
| 0     | Mercury | 2440      | 0     | terrestrial| no    | 167         | yes            |
| 1     | Venus   | 6652      | 0     | terrestrial| no    | 464         | no             |
| 2     | Earth   | 6371      | 1     | terrestrial| no    | 15          | yes            |
| 3     | Mars    | 3390      | 2     | terrestrial| no    | 65          | no             |
| 4     | Jupiter | 69911     | 80    | gas giant  | yes   | 110         | yes            |
| 5     | Saturn  | 58232     | 83    | gas giant  | yes   | 140         | yes            |
| 6     | Uranus  | 25362     | 27    | ice giant  | yes   | 195         | yes            |
| 7     | Neptune | 24622     | 14    | ice giant  | yes   | -200        | yes            |

```python
planets.groupby(['type']).sum()
```

| Type        | Planet                    | Radius_km | Moons | Rings     | Mean_Temp_C | Magnetic_Field |
|-------------|---------------------------|-----------|--------|-----------|--------------|----------------|
| gas giant   | JupiterSaturn             | 128143    | 163    | yesyes    | 250          | yesyes         |
| ice giant   | UranusNeptune             | 49984     | 41     | yesyes    | -5           | yesyes         |
| terrestrial | MercuryVenusEarthMars     | 18853     | 3      | nononono  | 711          | yesnoyesno     |

```python
planets.groupby(['type']).sum()[['moons']]
```

| Type        | Moons |
|-------------|-------|
| gas giant   | 163   |
| ice giant   | 41    |
| terrestrial | 3     |

```python
planets.groupby(['type','magnetic_field'])[['radius_km','moons','mean_temp_c']].mean()
```

| type        | magnetic_field | radius_km | moons | mean_temp_c |
|-------------|----------------|-----------|--------|--------------|
| gas giant   | yes            | 64071.5   | 81.5   | 125.0        |
| ice giant   | yes            | 24992.0   | 20.5   | -2.5         |
| terrestrial | no             | 5021.0    | 1.0    | 264.5        |
| terrestrial | yes            | 4405.5    | 0.5    | 91.0         |

```python
planets.groupby(['type'])[['radius_km','moons','mean_temp_c']].agg(['mean', 'median'])
```

| type        | radius_km (mean) | radius_km (median) | moons (mean) | moons (median) | mean_temp_c (mean) | mean_temp_c (median) |
|-------------|------------------|--------------------|--------------|----------------|---------------------|-----------------------|
| gas giant   | 64071.50         | 64071.5            | 81.50        | 81.5           | 125.00              | 125.0                 |
| ice giant   | 24992.00         | 24992.0            | 20.50        | 20.5           | -2.50               | -2.5                  |
| terrestrial | 4713.25          | 4880.5             | 0.75         | 0.5            | 177.75              | 116.0                 |

```python
planets.groupby(['type'])[['radius_km','moons','mean_temp_c']].agg(['mean', 'min', 'max'])
```

| type        | radius_km (mean) | radius_km (min) | radius_km (max) | moons (mean) | moons (min) | moons (max) | mean_temp_c (mean) | mean_temp_c (min) | mean_temp_c (max) |
|-------------|------------------|------------------|------------------|---------------|--------------|--------------|---------------------|---------------------|---------------------|
| gas giant   | 64071.50         | 58232            | 69911            | 81.50         | 80           | 83           | 125.00              | 110                 | 140                 |
| ice giant   | 24992.00         | 24622            | 25362            | 20.50         | 14           | 27           | -2.50               | -200                | 195                 |
| terrestrial | 4713.25          | 2440             | 6652             | 0.75          | 0            | 2            | 177.75              | 15                  | 464                 |

```python
planets.groupby(['type'])[['radius_km','moons','mean_temp_c']].agg({'radius_km': ['mean'], 'moons' : ['min', 'max']})
```

| type        | radius_km mean | moons min | moons max |
|-------------|----------------|-----------|-----------|
| gas giant   | 64071.50       | 80        | 83        |
| ice giant   | 24992.00       | 14        | 27        |
| terrestrial | 4713.25        | 0         | 2         |

```python
def percentile_90(x):
    return x.quantile(0.9)

planets.groupby(['type'])[['radius_km','moons','mean_temp_c']].agg(['mean', percentile_90])
```

| type        | radius_km mean | radius_km 90th percentile | moons mean | moons 90th percentile | mean_temp_c mean | mean_temp_c 90th percentile |
|-------------|----------------|---------------------------|------------|-----------------------|------------------|-----------------------------|
| gas giant   | 64071.50       | 68743.1                   | 81.50      | 82.7                  | 125.00           | 137.0                       |
| ice giant   | 24992.00       | 25288.0                   | 20.50      | 25.7                  | -2.50            | 155.5                       |
| terrestrial | 4713.25        | 6567.7                    | 0.75       | 1.7                   | 177.75           | 374.9                       |

## agg()

[agg()](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.agg.html) işlevi, bir veri çerçevesine aynı anda birden fazla işlev uygulamak istediğinizde kullanışlıdır. agg(), DataFrame sınıfına ait bir yöntemdir. "Toplam" anlamına gelir. En önemli parametreleri şunlardır:

Func: Uygulanacak işlev

Eksen: Fonksiyonun uygulanacağı eksen (varsayılan= 0).

## Yerleşik toplama işlevleri

Önceki örnekler, groupby nesnelerine uygulanan mean(), min() ve size() toplama işlevlerini göstermiştir. Birçok mevcut yerleşik toplama işlevi vardır. Daha yaygın kullanılanlardan bazıları şunlardır:

| Fonksiyon | Açıklama                                   |
|-----------|--------------------------------------------|
| Count()   | Her gruptaki boş olmayan değerlerin sayısı |
| Sum()     | Her gruptaki değerlerin toplamı            |
| Mean()    | Her gruptaki değerlerin ortalaması         |
| Median()  | Her gruptaki değerlerin medyanı            |
| Min()     | Her gruptaki minimum değer                 |
| Max()     | Her gruptaki maksimum değer                |
| Std()     | Her gruptaki değerlerin standart sapması   |
| Var()     | Her gruptaki değerlerin varyansı           |

```python
import numpy as np 
import pandas as pd

data = {'planet': ['Mercury', 'Venus', 'Earth', 'Mars'], 'radius km': [2440, 6052, 6371, 3390], 'moons': [0, 0, 1, 2],}

df1 = pd.DataFrame(data) 

df1
```

| planet  | radius\_km | moons |
| ------- | ---------- | ----- |
| Mercury | 2440       | 0     |
| Venus   | 6052       | 0     |
| Earth   | 6371       | 1     |
| Mars    | 3390       | 2     |

```python
data = {'planet': ['Jupiter', 'Saturn', 'Uranus', 'Neptune'], 'radius km': [69911, 58232, 25362, 24622], 'moons': [80, 83, 27, 14],} 

df2 = pd.DataFrame(data)

df2
```

| planet  | radius\_km | moons |
| ------- | ---------- | ----- |
| Jupiter | 69911      | 80    |
| Saturn  | 58232      | 83    |
| Uranus  | 25362      | 27    |
| Neptune | 24622      | 14    |

```python
df3 = pd.concat([df1,df2], axis= 0)
df3
```

| planet  | radius\_km | moons |
| ------- | ---------- | ----- |
| Mercury | 2440       | 0     |
| Venus   | 6052       | 0     |
| Earth   | 6371       | 1     |
| Mars    | 3390       | 2     |
| Jupiter | 69911      | 80    |
| Saturn  | 58232      | 83    |
| Uranus  | 25362      | 27    |
| Neptune | 24622      | 14    |

```python
df3 = df3.reset_index(drop=True)
df3
```

| planet  | radius\_km | moons |
| ------- | ---------- | ----- |
| Mercury | 2440       | 0     |
| Venus   | 6052       | 0     |
| Earth   | 6371       | 1     |
| Mars    | 3390       | 2     |
| Jupiter | 69911      | 80    |
| Saturn  | 58232      | 83    |
| Uranus  | 25362      | 27    |
| Neptune | 24622      | 14    |

```python
import pandas as pd
import numpy as np

data= {
    'planet': ['Earth', 'Mars', 'Jupiter', 'Saturn', 'Uranus', 'Neptune', 'Janssen', 'Tadmor'],
    'type': ['terrestrial', 'terrestrial', 'gas giant', 'gas giant', 'ice giant', 'ice giant', 'super earth', 'gas giant'],
    'rings': ['no', 'no', 'yes', 'yes', 'yes', 'yes', 'no', None],
    'mean_temp_c': [15.0, -65.0, -110.0, -140.0, -195.0, -200.0, np.nan, np.nan],
    'magnetic_field': ['yes', 'no', 'yes', 'yes', 'no', 'yes', None, None],
    'life': [1, 0, 0, 0, 0, 0, 1, 1]
}

df4 = pd.DataFrame(data)
df4
```

| planet  | type        | rings | mean\_temp\_c | magnetic\_field | life |
| ------- | ----------- | ----- | ------------- | --------------- | ---- |
| Earth   | terrestrial | no    | 15.0          | yes             | 1    |
| Mars    | terrestrial | no    | -65.0         | no              | 0    |
| Jupiter | gas giant   | yes   | -110.0        | yes             | 0    |
| Saturn  | gas giant   | yes   | -140.0        | yes             | 0    |
| Uranus  | ice giant   | yes   | -195.0        | no              | 0    |
| Neptune | ice giant   | yes   | -200.0        | yes             | 0    |
| Janssen | super earth | no    | NaN           | None            | 1    |
| Tadmor  | gas giant   | None  | NaN           | None            | 1    |

## Merge()

![image](./images/2001.png)
![image](./images/2002.png)
![image](./images/2003.png)
![image](./images/2004.png)
![image](./images/2005.png)

```python
df3
```

| planet  | radius\_km | moons |
| ------- | ---------- | ----- |
| Mercury | 2440       | 0     |
| Venus   | 6052       | 0     |
| Earth   | 6371       | 1     |
| Mars    | 3390       | 2     |
| Jupiter | 69911      | 80    |
| Saturn  | 58232      | 83    |
| Uranus  | 25362      | 27    |
| Neptune | 24622      | 14    |

```python
df4
```

| planet  | type        | rings | mean\_temp\_c | magnetic\_field | life |
| ------- | ----------- | ----- | ------------- | --------------- | ---- |
| Earth   | terrestrial | no    | 15.0          | yes             | 1    |
| Mars    | terrestrial | no    | -65.0         | no              | 0    |
| Jupiter | gas giant   | yes   | -110.0        | yes             | 0    |
| Saturn  | gas giant   | yes   | -140.0        | yes             | 0    |
| Uranus  | ice giant   | yes   | -195.0        | no              | 0    |
| Neptune | ice giant   | yes   | -200.0        | yes             | 0    |
| Janssen | super earth | no    | NaN           | None            | 1    |
| Tadmor  | gas giant   | None  | NaN           | None            | 1    |

```python
inner = pd.merge(df3, df4, on="planet", how='inner')
inner
```

| planet  | radius\_km | moons | type        | rings | mean\_temp\_c | magnetic\_field | life |
| ------- | ---------- | ----- | ----------- | ----- | ------------- | --------------- | ---- |
| Earth   | 6371       | 1     | terrestrial | no    | 15.0          | yes             | 1    |
| Mars    | 3390       | 2     | terrestrial | no    | -65.0         | no              | 0    |
| Jupiter | 69911      | 80    | gas giant   | yes   | -110.0        | yes             | 0    |
| Saturn  | 58232      | 83    | gas giant   | yes   | -140.0        | yes             | 0    |
| Uranus  | 25362      | 27    | ice giant   | yes   | -195.0        | no              | 0    |
| Neptune | 24622      | 14    | ice giant   | yes   | -200.0        | yes             | 0    |

```python
outer = pd.merge(df3, df4, on="planet", how='outer')
outer
```

| index | planet  | radius_km | moons | type        | rings | mean_temp_c | magnetic_field | life |
|-------|---------|-----------|-------|-------------|-------|-------------|----------------|------|
| 0     | Mercury | 2440.0    | 0.0   | NaN         | NaN   | NaN         | NaN            | NaN  |
| 1     | Venus   | 6052.0    | 0.0   | NaN         | NaN   | NaN         | NaN            | NaN  |
| 2     | Earth   | 6371.0    | 1.0   | terrestrial | no    | 15.0        | yes            | 1.0  |
| 3     | Mars    | 3390.0    | 2.0   | terrestrial | no    | -65.0       | no             | 0.0  |
| 4     | Jupiter | 69911.0   | 80.0  | gas giant   | yes   | -110.0      | yes            | 0.0  |
| 5     | Saturn  | 58232.0   | 83.0  | gas giant   | yes   | -140.0      | yes            | 0.0  |
| 6     | Uranus  | 25362.0   | 27.0  | ice giant   | yes   | -195.0      | no             | 0.0  |
| 7     | Neptune | 24622.0   | 14.0  | ice giant   | yes   | -200.0      | yes            | 0.0  |
| 8     | Janssen | NaN       | NaN   | super earth | no    | NaN         | None           | 1.0  |
| 9     | Tadmor  | NaN       | NaN   | gas giant   | None  | NaN         | None           | 1.0  |

```python
left = pd.merge(df3, df4, on="planet", how='left')
left
```

| index | planet  | radius_km | moons | type        | rings | mean_temp_c | magnetic_field | life |
|-------|---------|-----------|-------|-------------|-------|-------------|----------------|------|
| 0     | Mercury | 2440      | 0     | NaN         | NaN   | NaN         | NaN            | NaN  |
| 1     | Venus   | 6052      | 0     | NaN         | NaN   | NaN         | NaN            | NaN  |
| 2     | Earth   | 6371      | 1     | terrestrial | no    | 15.0        | yes            | 1.0  |
| 3     | Mars    | 3390      | 2     | terrestrial | no    | -65.0       | no             | 0.0  |
| 4     | Jupiter | 69911     | 80    | gas giant   | yes   | -110.0      | yes            | 0.0  |
| 5     | Saturn  | 58232     | 83    | gas giant   | yes   | -140.0      | yes            | 0.0  |
| 6     | Uranus  | 25362     | 27    | ice giant   | yes   | -195.0      | no             | 0.0  |
| 7     | Neptune | 24622     | 14    | ice giant   | yes   | -200.0      | yes            | 0.0  |

```python
right = pd.merge(df3, df4, on="planet", how='right')
right
```

| index | planet  | radius_km | moons | type        | rings | mean_temp_c | magnetic_field | life |
|-------|---------|-----------|-------|-------------|-------|-------------|----------------|------|
| 0     | Earth   | 6371.0    | 1.0   | terrestrial | no    | 15.0        | yes            | 1    |
| 1     | Mars    | 3390.0    | 2.0   | terrestrial | no    | -65.0       | no             | 0    |
| 2     | Jupiter | 69911.0   | 80.0  | gas giant   | yes   | -110.0      | yes            | 0    |
| 3     | Saturn  | 58232.0   | 83.0  | gas giant   | yes   | -140.0      | yes            | 0    |
| 4     | Uranus  | 25362.0   | 27.0  | ice giant   | yes   | -195.0      | no             | 0    |
| 5     | Neptune | 24622.0   | 14.0  | ice giant   | yes   | -200.0      | yes            | 0    |
| 6     | Janssen | NaN       | NaN   | super earth | no    | NaN         | None           | 1    |
| 7     | Tadmor  | NaN       | NaN   | gas giant   | None  | NaN         | None           | 1    |

# Kurs 3: Rakamların Ötesine Geçin

## EDA Prosesi

Norveç'teki iğne yapraklı bir ormandaki ağaçlar hakkında yalnızca 200 satır ve beş sütun veriye sahip bir veri kümesi atandığını hayal edin. Tam analizinizi tamamlamak için 1.000'den fazla satıra ve en az iki sütuna daha ihtiyacınız olacağını biliyorsunuz. Bundan çok daha fazla ayrıntı olmasa bile, tüm EDA süreciniz şöyle görünebilir:

![image](./images/3001.png)

1. **Keşfetme**: Veri kümesinin genel şeklini, boyutunu ve içeriğini kontrol edersiniz. Veri konusunda kısa olduğunu görüyorsunuz.

2. **Katılma**: Daha fazla veri eklersiniz.

3. **Doğrulama**: Yeni verilerde hatalar veya yazım hataları olmadığını hızlı bir şekilde kontrol edersiniz.

4. **Yapılandırma**: Trendleri anlamak için verileri farklı zaman dilimlerinde ve segmentlerde yapılandırırsınız.

5. **Doğrulama:** Yapılandırmada yaptığınız yeni sütunların doğru tasarlandığından emin olmak için başka bir hızlı kontrol yaparsınız.

6. **Temizlik**: Aykırıları, eksik verileri ve dönüşüm veya dönüşüm ihtiyaçlarını kontrol edersiniz.

7. **Doğrulama**: Temizledikten sonra, yaptığınız değişikliklerin doğru ve doğru olup olmadığını iki kez kontrol edersiniz.

8. **Sunum**: Veri kümenizi bir eşle paylaşırsınız.

Verilerde yaptığınız değişikliklerin farkında olmadan hata vermediğinden emin olmak için "geçerli" uygulamasını yinelemeli olarak veya birden çok kez gerçekleştirdiğinize dikkat edin. Ayrıca, önceden daha fazla veriye olan ihtiyacı fark ettiğiniz için, "keşfetme" uygulamasının hemen ardından "katılma" uygulaması gerçekleştirildi.

Temizlenmiş veri kümenizi bir eşinize sunduktan sonra, daha fazla keşif ve/veya temizlik için notlar veya fikirler alma şansınız yüksektir. Bu nedenle, daha da fazla yineleme göreceksiniz.

**Profesyonel ipucu**: Veri bilimcileri, "temiz" ve modelleme veya makine öğrenimi algoritmaları için hazır olduğunu ilan etmekte kendilerini rahat hissetmeden önce bir veri kümesinde EDA uygulamalarını birden çok kez gerçekleştirmeyi bekliyorlar.

## Etik makine öğreniminde EDA'nın önemi

Algoritmalar ve makine öğrenimi ağları bireyler, şirketler ve hatta hükümetler adına giderek daha fazla karar vermeye başladıkça, etik ve düzenleme tartışması giderek daha önemli hale geliyor. [Etik Yapay Zeka ve Makine Öğrenimi Enstitüsü](https://ethical.institute/principles.html)'ye göre, makine öğrenimi sistemlerini sorumlu bir şekilde geliştirmek için sekiz ilke vardır.

**EDA sürecinin temel ilkeleri**

Aşağıdaki iki ilke doğası gereği EDA sürecinin bir parçasıdır:

**İnsan büyütme**: Bu ilke, insanların gözetim için AI veya makine öğrenimi algoritma sistemlerine eklenmesini sağlar. Veri bilimcileri tarafından gerçekleştirilen kapsamlı EDA, bir algoritmaya beslenen önyargıyı, dengesizliği ve yanlışlıkları sınırlamanın belki de en iyi yollarından biridir.

**Önyargı değerlendirmesi**: İnsan müdahalesi olmadan, önyargı makine öğrenimi modellerinde çok kolay enjekte edilir ve yeniden üretilir. Metodik EDA süreçlerinin gerçekleştirilmesi, veri bilimcilerinin verilerdeki önyargıların ve dengesizliklerin farkında olmalarını ve bunlara göre hareket etmelerini sağlayacaktır.

**Profesyonal ipucu**: Veri kariyer alanında etik standartlara bağlılığı sağlamanın önemi abartılamaz. Veri profesyonellerinin, EDA çalışmalarına sürekli olarak etik bir zihniyet uygulayarak önyargı ve ayrımcılığı tanımak için kapasitelerini sürekli olarak büyütmeleri gerekir.

Makine öğreniminin ötesinde, EDA neredeyse her önemli veritabanı kararına uygulanabilir. İleride, EDA'nın birçok uygulaması ve yinelemeli ve sıralı olmayan bir yaklaşımın gerekliliği hakkında bilgi edineceksiniz.

## Şematik Gösterim

```python 
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

# Read in the 2018 lightning strike dataset
df = pd.read_csv('eda_using_basic_data_functions_in_python_dataset1.csv')
``` 

```python
# Eğer tarih sütunu varsa
df['date'] = pd.to_datetime(df['date'])
```

```python 
# Inspect the first 10 rows 
df.head(10)
```

| index | date       | number_of_strikes | center_point_geom  |
|-------|------------|-------------------|--------------------|
| 0     | 2018-01-03 | 194               | POINT(-75 27)      |
| 1     | 2018-01-03 | 41                | POINT(-78.4 29)    |
| 2     | 2018-01-03 | 33                | POINT(-73.9 27)    |
| 3     | 2018-01-03 | 38                | POINT(-73.8 27)    |
| 4     | 2018-01-03 | 92                | POINT(-79 28)      |
| 5     | 2018-01-03 | 119               | POINT(-78 28)      |
| 6     | 2018-01-03 | 35                | POINT(-79.3 28)    |
| 7     | 2018-01-03 | 60                | POINT(-79.1 28)    |
| 8     | 2018-01-03 | 41                | POINT(-78.7 28)    |
| 9     | 2018-01-03 | 119               | POINT(-78.6 28)    |

```python 
#Get more information about the data, including data types of each column 
df.info()

# <class 'pandas.core.frame.DataFrame'>
# RangeIndex: 3401012 entries, 0 to 3401011
# Data columns (total 3 columns):
#  #   Column             Dtype         
# ---  ------             -----         
#  0   date               datetime64[ns]
#  1   number_of_strikes  int64         
#  2   center_point_geom  object        
# dtypes: datetime64 , int64(1), object(1)
# memory usage: 77.8+ MB
```

```python
df['month'] = df['date'].dt.month
df.head()
```

|   | date       | number_of_strikes | center_point_geom | month |
|---|------------|-------------------|--------------------|-------|
| 0 | 2018-01-03 | 194               | POINT(-75 27)      | 1     |
| 1 | 2018-01-03 | 41                | POINT(-78.4 29)    | 1     |
| 2 | 2018-01-03 | 33                | POINT(-73.9 27)    | 1     |
| 3 | 2018-01-03 | 38                | POINT(-73.8 27)    | 1     |
| 4 | 2018-01-03 | 92                | POINT(-79 28)      | 1     |

```python
# Create a new 'month txt' column
df['month_txt'] = df['date'].dt.month_name().str.slice(stop=3)

# Create new helper dataframe for plotting
df_by_month = (
    df.groupby(['month', 'month_txt'])
      .sum()
      .sort_values('month', ascending=True)
      .head(12)
      .reset_index()
)

df_by_month
```

| month | month_txt | number_of_strikes |
|-------|-----------|-------------------|
| 1     | Jan       | 860045            |
| 2     | Feb       | 2071315           |
| 3     | Mar       | 854168            |
| 4     | Apr       | 1524339           |
| 5     | May       | 4166726           |
| 6     | Jun       | 6445083           |
| 7     | Jul       | 8320400           |
| 8     | Aug       | 15525255          |
| 9     | Sep       | 3018336           |
| 10    | Oct       | 1093962           |
| 11    | Nov       | 409263            |
| 12    | Dec       | 312097            |

```python
plt.bar(
    x=df_by_month['month_txt'],                     # X ekseninde ay isimleri (kısa hali: Jan, Feb, vs.)
    height=df_by_month['number_of_strikes'],        # Y ekseninde yıldırım sayıları
    label="Number of strikes"                       # Legende (açıklamada) kullanılacak etiket
)

plt.xlabel("months (2018)")                         # X ekseni başlığı
plt.ylabel("Number of lightning strikes")           # Y ekseni başlığı
plt.title("Number of lightning strikes in 2018 by months")  # Grafik başlığı

plt.legend()                                        # Açıklama kutusunu göster
plt.show()                                          # Grafiği ekrana çiz
```

![image](./images/3002.png)

```python
# Import statements
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns

# Read in the 2018 lightning strike dataset
df = pd.read_csv('eda_using_basic_data_functions_in_python_dataset1.csv')

# Convert 'date' column to datetime
df['date'] = pd.to_datetime(df['date'])

# Create new columns
df['week'] = df['date'].dt.strftime('%Y-W%V')       # örn: 2018-W27
df['month'] = df['date'].dt.strftime('%Y-%m')       # örn: 2018-07
df['quarter'] = df['date'].dt.to_period('Q').dt.strftime('%Y-Q%q')
df['year'] = df['date'].dt.strftime('%Y')

df.Head()
```

| date | number_of_strikes | center_point_geom | week | month | quarter | year |
|---|---|---|---|---|---|---|
| 2016-08-05 | 16                | POINT(-101.5 24.7)   | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-85 34.3)      | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-89 41.4)      | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-89.8 30.7)    | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-86.2 37.9)    | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-97.8 38.9)    | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |
| 2016-08-05 | 16                | POINT(-81.9 36)      | 2016-W31 | 2016-08 | 2016-Q3 | 2016 |

```python
# Create new dataframe view of just 2018 data, summed by week
df_by_week_2018 = df[df['year'] == '2018'].groupby(['week']).sum().reset_index()

# Plot a bar chart of weekly strike totals in 2018
plt.bar(x=df_by_week_2018['week'], height=df_by_week_2018['number_of_strikes'])
plt.xlabel("Week number")
plt.ylabel("Number of lightning strikes")
plt.title("Number of lightning strikes per week (2018)")
plt.show()
```
![image](./images/3003.png)

plt.figure(figsize=(20, 5))  # Increase output size
plt.bar(x=df_by_week_2018['week'], height=df_by_week_2018['number_of_strikes'])
plt.plot()
plt.xlabel("Week number")
plt.ylabel("Number of lightning strikes")
plt.title("Number of lightning strikes per week (2018)")
plt.xticks(rotation=45, fontsize=8)  # Rotate x-axis labels and decrease font size
plt.show()

![image](./images/3004.png)

```python
df_by_quarter['number_of_strikes'].div(1000000)
```

|    | Value     |
|----|-----------|
| 0  | 2.683798  |
| 1  | 15.084857 |
| 2  | 21.843820 |
| 3  | 1.969754  |
| 4  | 2.444279  |
| 5  | 13.548585 |
| 6  | 17.277461 |
| 7  | 1.824870  |
| 8  | 3.785528  |
| 9  | 12.136148 |
| 10 | 26.863991 |
| 11 | 1.815322  |

```python
# Group 2016-2018 data by quarter and sum
df_by_quarter = df.groupby(['quarter']).sum().reset_index()

# Format as text, in millions
df_by _quarter('number_of_strikes_formated'] = df_by_quarter['number_of_strikes'].div(1000000).round(1).astype(int)

plt.figure(figsize = (15,5))
plt.bar(x = df_by_quarter['quarter'], height=df_by_quarter['number_of_strikes'])

def addlabels (x, y, labels):
    'Iterates over data and plots text labels above each bar of bar graph.'
    for i in range(len(x)):
        plt.text(i, y[i], labels[i], ha 'center', va = 'bottom')

plt.figure(figsize(15,5))
plt.bar(x=df_by_quarter['quarter'], height=df_by_quarter['number_of_strikes'])
addlabels(df_by_quarter['quarter'], df_by_quarter['number_of_strikes'], df_by_quarter['number_of_strikes_formated'])
plt.plot()
plt.xlabel('Quarter')
plt.ylabel('Number of lightning strikes')
plt.title('Number of lightning strikes per quarter (2016-2018)')
plt.show()
```

![image](./images/3005.png)

```python
# Create two new columns
df_by_quarter['quarter_number'] = df_by_quarter['quarter'].str[-2:]
df_by_quarter['year'] = df_by_quarter['quarter'].str[:4]

df_by_quarter.head()

plt.figure(figsize=(15,5))
p = sns.barplot(data=df_by_quarter, x='quarter_number', y='number_of_strikes', hue='year')

for b in p.patches:
    p.annotate(
        str(round(b.get_height() / 1000000, 1)) + 'M',
        (b.get_x() + b.get_width() / 2., b.get_height() + 1.2e6),
        ha='center', va='bottom',
        xytext=(0, -12),
        textcoords='offset points'
    )

plt.xlabel("Quarter")
plt.ylabel("Number of lightning strikes")
plt.title("Number of lightning strikes per quarter (2016-2018)")
plt.show()
```

![image](./images/3006.png)




